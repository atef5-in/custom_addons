<odoo>
    <data>
        <record id="view_custom_project_form" model="ir.ui.view">
            <field name="name">custom.project.form</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <form string="Projet">
                    <header>
                        <!--                        <button name="set_compute2" string="Création/Revalidation Project" type="object" class="oe_highlight" confirm="sure??"/>-->
                    </header>
                    <sheet>
                        <field name="state" string="State"/>
                        <group>
                            <group>
                                <field name="date" string="Date"/>
                                <field name="is_admin" string="Date" invisible="1"/>
                                <field name="id" string="ID" invisible="0"/>
                                <newline/>
                                <field name="number" string="N°" invisible="1"/>
                                <field name="name" string="Nom" invisible="1"/>
                                <newline/>
                                <field name="partner_id" string="Client" required="1"
                                       domain="[('company_id','=','company_id')]"/>
                                <newline/>
                                <field name="resp_id" string="Chef du Project"/>
                                <newline/>
                                <field name="fees_id" string="Contrat lié"
                                       attrs="{'readonly':[('fees_id','=',False)]}"/>
                                <newline/>
                                <field name="parent_id1" string="Project Parent"/>
                                <newline/>
                                <field name="bord" string="N° PO"/>
                                <newline/>
                                <field name="npc" string="N° Project Client"/>
                                <field name="is_super_admin" string="AAA" invisible="1"/>
                                <!--                                <newline/>-->
                                <!--                                <field name="date_start" string="Date de Début" required="1"/>-->
                                <!--                                <newline/>-->
                                <!--                                <field name="date_end" string="Date de Livraison" required="1"/>-->
                            </group>
                            <group>
                                <field name="country_id" string="Pays" required="1"/>
                                <field name="state_id" string="Municipalités"/>
                                <field name="city" string="Région"/>
                                <field name="ftp" widget="url" string="Lien FTP"/>
                                <field name="priority" string="Priorité Projet"/>
                                <field name="ref" string="Nbre Poteaux"/>
                                <field name="km" string="Nbre KM"/>
                                <field name="type3" string="Type Projet" required="1"/>
                                <field name="fact" string="Facturable"/>
                            </group>
                        </group>
                        <notebook>
                            <page string="Taches Planifiées" name="project_stages">
                                <group>
                                    <group>
                                        <field name="date_s" string="Date  D. Tache"/>
                                        <button name="set_compute2" string="Attribuer Séquence"
                                                type="object" icon="fa-play"
                                                attrs="{'invisible': [('is_admin', '=', False)]}"/>
                                    </group>
                                    <group>
                                        <field name="date_e" string="Date  F. Tache"/>
                                        <!--                                        <button name="set_coord" string="Affecter Coordinateurs" type="object"-->
                                        <!--                                                icon="fa-duotone fa-user-helmet-safety"/>-->
                                    </group>
                                </group>
                                <field name="task_ids">
                                    <tree name="Task" editable="bottom">
                                        <field name="id"/>
                                        <field name="sequence" string="N°"/>
                                        <field name="is_super_admin" string="AAA" invisible="1"/>
                                        <field name="categ_id" string="Département"/>
                                        <field name="kit_id"/>
                                        <field name="name" string="Nom Kit"/>
                                        <field name="date_start" string="Date Début" widget="date"/>
                                        <field name="date_end" string="Date Fin" widget="date"/>
                                        <field name="color" string="Durée(Jrs)" sum="Total"/>
                                        <field name="planned_hours" string="Durée(Hrs)" sum="Total"
                                               invisible="1"/>
                                        <field name="qte" string="Qté/Unité" sum="Total"/>
                                        <field name="uom_id" string="Unité" invisible="1"/>
                                        <field name="cout" string="Tarif"/>
                                        <field name="total" string="Sous-Total" sum="Total"/>
                                        <field name="ftp" widget="url" string="Lien FTP" invisible="1"/>
                                        <field name="reviewer_id" string="Superviseur"/>
                                        <field name="coordin_id" string="Coordinateur"/>
                                        <field name="rank" string="Séq"/>
                                        <field name="pourc" string="% Workflow"/>
                                        <field name="priority" string="Priorité" required="0" invisible="1"/>
                                        <field name="state" string="Statut" readonly="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Equivalence Taches" attrs="{'invisible': [('is_admin', '=', False)]}">
                                <group>
                                    <!--                                    <button name="set_compute" string="Générer Equivalence" type="object"-->
                                    <!--                                            class="oe_highlight" icon="gtk-execute"/>-->
                                    <!--                                    <newline/>-->
                                    <field name="affect_ids" nolabel="1"/>
                                </group>
                            </page>
                            <page string="Données Statistiques" attrs="{'invisible': [('is_admin', '=', False)]}">
                                <group>
                                    <group string="Calcul Prévisionnel">
                                        <field name="ct" string="Durée Prévionnelle"/>
                                        <field name="cp" string="Couts Prévionnel"/>
                                    </group>
                                    <group>
                                        <field name="hours_r" widget="percentpie" string="%Délai Réel/Délai Prévu"
                                               nolabel="1"/>
                                        <field name="progress_amount" widget="percentpie" string="% Dépense/Budget"
                                               nolabel="1"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Travaux">
                                <field name="work_ids">
                                    <tree string="Task Work"
                                          colors="blue:state== 'draft';green:state== 'affect';purple:state== 'tovalid';red:state== 'cancel'"
                                          readonly="1" create="false" edit="false" editable="bottom"
                                          default_order='project_id,sequence'>
                                        <field name="sequence" string="Séq " readonly="1"/>
                                        <field name="project_id" string="Projet" readonly="1"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"/>
                                        <field name="task_id" string="Tache" invisible="1"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"/>
                                        <field name="product_id"
                                               readonly="1"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"
                                               string="Type de Service" invisible="0"/>
                                        <field name="name" string="Libellé Travaux" readonly="1"/>
                                        <field name="zone" string="Zone " readonly="1"/>
                                        <field name="etape" string="Etape" readonly="1" invisible="0"/>
                                        <field name="secteur" string="Sect" readonly="1"/>
                                        <field name="done4" string="Libellé " readonly="1" invisible="1"/>
                                        <field name="date_start" string="Date Déb." readonly="1"/>
                                        <field name="date_end" string="Date Fin" readonly="1"/>
                                        <field name="color" string="Nb Jrs Prév." required="1"/>
                                        <field name="hours" string="Nb Hrs  Prév." required="1"/>
                                        <field name="issue_id" string="Date Fin Prévue" invisible="1"/>
                                        <field name="line_ids" string="Date Fin Prévue" invisible="1"/>
                                        <field name="gest_id" string="Superviseur"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"
                                               readonly="1"/>
                                        <field name="employee_id" string="Ressource affectée"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"/>
                                        <field name="r_id" string="Libellé " invisible="1"/>
                                        <field name="paylist_id" string="Facture"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"
                                               invisible="1"/>
                                        <field name="done" string="Libellé " readonly="1" invisible="1"/>
                                        <field name="done1" string="Libellé " readonly="1" invisible="1"/>
                                        <field name="done2" string="Libellé " readonly="1" invisible="1"/>
                                        <field name="done3" string="Libellé " readonly="1" invisible="1"/>
                                        <field name="poteau_i" string="Qté T. Prévue" readonly="1"/>
                                        <field name="poteau_da" string="Qté Déja Affect." readonly="1"/>
                                        <field name="poteau_ra" string="Qté Non Affect." readonly="1"
                                               bg_color="pink:poteau_ra>0;"/>
                                        <field name="poteau_t" string="Qté Ddée" readonly="1"/>
                                        <field name="done33" string="Libellé " readonly="1" invisible="1"/>
                                        <field name="uom_id" string="Unité" required="1"/>
                                        <field name="risk" string="risk" required="1" invisible="1"/>
                                        <field name="hours_r" string="Nb Hrs Réal." required="1"/>
                                        <field name="poteau_r" string="Qté Réal." required="1"/>
                                        <field name="total_r" string="Cout Réal" required="1"/>
                                        <field name="state" string="Etat"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"
                                               readonly="1"/>
                                        <field name="display" string="display"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"
                                               invisible="1"/>
                                        <field name="group_id" invisible="1"/>
                                        <!--                                        <button name="action_open" string="Consulter/Editer Tache" type="object"-->
                                        <!--                                                icon="gtk-edit"/>-->
                                        <!--                                        <button name="project_open" string="Consulter Projet" type="object"-->
                                        <!--                                                icon="gtk-preferences"/>-->
                                        <!--                                        <button name="action_open_flow" string="Consulter Workflow" type="object"-->
                                        <!--                                                icon="gtk-sort-descending"-->
                                        <!--                                                attrs="{'invisible': [('done4','=', False)]}"/>-->
                                        <!--                                        <button name="action_open_group2" string="Consulter Retours Bons" type="object"-->
                                        <!--                                                icon="terp-stock_effects-object-colorize"-->
                                        <!--                                                attrs="{'invisible': [('done3','=', False)]}"/>-->
                                        <!--                                        <button name="action_open_group" string="Consulter la F.T/Facture" type="object"-->
                                        <!--                                                icon="STOCK_INDENT" attrs="{'invisible': [('done2','=', False)]}"/>-->
                                        <!--                                        <button name="move_next" string="Taches Suivantes" type="object"-->
                                        <!--                                                icon="gtk-go-forward" attrs="{'invisible': [('done33','=', False)]}"/>-->
                                        <!--                                        <button name="action_open_invoice" string="Consulter la Facture/F.P"-->
                                        <!--                                                type="object" icon="STOCK_APPLY"-->
                                        <!--                                                attrs="{'invisible': [('done1','=', False)]}"/>-->
                                        <!--                                        <button name="action_copy" string="Dupliquer Fiche" type="object"-->
                                        <!--                                                icon="gtk-copy" confirm="Voulez-vous Dupliquer les Travaux?"-->
                                        <!--                                                invisible="1"/>-->
                                        <!--                                        <button name="action_issue2" string="Consulter Tableau Plans Relevé"-->
                                        <!--                                                type="object" icon="terp-go-year"-->
                                        <!--                                                attrs="{'invisible': [('r_id', '=', False)]}"/>-->
                                    </tree>
                                </field>
                            </page>
                            <page string="Affectations Département et Services"
                                  attrs="{'invisible': [('is_admin', '=', False)]}">
                                <group>
                                    <group>
                                        <field name="academic_ids" nolabel="1"
                                               context="{'default_partner_id':partner_id}">
                                            <tree string="Task Work" editable="bottom">
                                                <field name="employee_id" string="Employé"
                                                       options="{'no_create': True, 'no_create_edit':True}"/>
                                                <field name="categ_id" required="1" string="Département"
                                                       options="{'no_create': True, 'no_create_edit':True}"/>
                                                <field name="product_id" string="Type Service"
                                                       options="{'no_create': True, 'no_create_edit':True}"/>
                                                <field name="partner_id" string="Client" readonly="1"
                                                       options="{'no_create': True, 'no_create_edit':True,'no_open':True}"/>
                                                <field name="currency_id" string="Date Fin" invisible="1"/>
                                                <field name="amount" string="Tarif Unitaire" widget="monetary"/>
                                            </tree>
                                        </field>
                                    </group>
                                </group>
                            </page>
                            <page string="Incidents et Anomalies">
                                <field name="issue_ids">
                                    <tree>
                                        <field name="name" readonly="1" string="Numéro"/>
                                        <field name="project_id"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"
                                               readonly="1"/>
                                        <field name="task_id"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"
                                               readonly="1"/>
                                        <field name="work_id"
                                               options="{'no_create': True, 'no_create_edit':True,'no_open':True}"
                                               readonly="1"/>
                                        <field name="state" invisible="0"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Sous Projets">
                                <field name="child_ids">
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_custom_project_tree" model="ir.ui.view">
            <field name="name">custom.project.tree</field>
            <field name="model">project.project</field>
            <field name="arch" type="xml">
                <tree decoration-info="state == 'draft'" decoration-success="state == 'close'"
                      decoration-danger="state == 'cancelled'" string="Projects">
                    <field name="id" string="ID"/>
                    <field name="task_count"/>
                    <field name="bord" string="Num BC"/>
                    <field name="npc" string="Num Project Client"/>
                    <field name="date" string="Date"/>
                    <field name="date_start" string="Date de Début"/>
                    <field name="date_end" string="Date de Livraison"/>
                    <field name="partner_id" string="Client"/>
                    <field name="progress_amount" string="% Dépense" widget="progressbar"/>
                    <field name="hours_r" string="% Hrs" widget="percentpie"/>
                    <field name="state"/>
                    <button name="action_open_project" string="Consulter Projet" type="object" icon="fa-edit"/>
                </tree>
            </field>
        </record>

        <record id="action_project" model="ir.actions.act_window">
            <field name="name">Projects</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">project.project</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create your first project !
                </p>
            </field>
        </record>

        <menuitem id="menu_project" name="Projects" sequence="-120" action="action_project"/>


    </data>
</odoo>